# Enable Developer Mode
reg add "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\AppModelUnlock" /t REG_DWORD /f /v "AllowDevelopmentWithoutDevLicense" /d "1"
.\gpupdate.exe /Force

Update-Help

# Install Chocolatey
Update-ExecutionPolicy Unrestricted
iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))

cinst -y Boxstarter

cinst -y Microsoft-Hyper-V-All -source windowsFeatures

# Packages
cinst -y hyper

# Activate Windows linux subsystem
Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux -NoRestart

if (Test-PendingReboot) { Invoke-Reboot }

## Git
cinst -y git.install
cinst -y poshgit

# Restart PowerShell / CMDer before moving on - or run
$env:Path = [System.Environment]::GetEnvironmentVariable("Path","Machine") + ";" + [System.Environment]::GetEnvironmentVariable("Path","User")

cinst -y Git-Credential-Manager-for-Windows
cinst -y github

## Node, npm
cinst -y nodejs.install
npm install -g npm-windows-upgrade

## Latest vscode
cinst -y vscode

## VSCode Extensions
cinst -y vscode-csharp
cinst -y vscode-ruby
cinst -y vscode-docker
cinst -y vscode-python
cinst -y vscode-java
cinst -y vscode-spring-initializr
cinst -y vscode-drawio
cinst -y vscode-gitignore


if (Test-PendingReboot) { Invoke-Reboot }


## Common Languages: Java, Ruby, Go, Python
cinst -y openjdk
cinst -y dotnet-sdk
cinst -y ruby
cinst -y ruby.devkit
cinst -y python2

if (Test-PendingReboot) { Invoke-Reboot }

## Basics
cinst -y 7zip.install
cinst -y sysinternals

if (Test-PendingReboot) { Invoke-Reboot }

## Cloud CLI
cinst -y awscli
cinst -y awstools.powershell
cinst -y azure-cli

## Docker to build containers
cinst -y docker-for-windows

## Add Kubernetes
cinst -y kubernetes-cli
cinst -y kubernetes-helm
cinst -y minikube
